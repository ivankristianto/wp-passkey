import{b as a,a as n,c as i}from"./index-4a4b01c0.js";async function c(){let r,t;try{const e=await wp.apiFetch({path:"/wp-passkey/v1/signin-request",method:"POST"}),{options:s,request_id:o}=e;t=o,r=await i(s)}catch(e){throw e}try{if((await wp.apiFetch({path:"/wp-passkey/v1/signin-response",method:"POST",data:{request_id:t,asseResp:r}})).status!=="verified")throw new Error("Passkey authentication failed.");const o=new URLSearchParams(window.location.search).get("redirect_to")||"/wp-admin";window.location.href=o}catch(e){throw e}}function u(r){const t=document.getElementById("loginform"),e=document.createElement("div");e.id="login_error",e.className="notice notice-error",e.innerHTML=r,t.parentNode.insertBefore(e,t),t.classList.add("shake")}wp.domReady(async()=>{if(!a())return;const r=document.getElementById("user_login");if(r&&r.setAttribute("autocomplete","username webauthn"),n())try{await c()}catch(t){u(t.message)}});
//# sourceMappingURL=login-469c2d44.js.map
